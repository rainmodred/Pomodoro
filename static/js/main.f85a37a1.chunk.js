(this.webpackJsonppomodoro=this.webpackJsonppomodoro||[]).push([[0],{17:function(e,t,a){e.exports={container:"Pomodoro_container__2uMDo",heading:"Pomodoro_heading__h-gbR",footer:"Pomodoro_footer__2Zxie",tabList:"Pomodoro_tabList__2DlED",tab:"Pomodoro_tab__3LbO2",selectedTab:"Pomodoro_selectedTab__2La1y",tabPanel:"Pomodoro_tabPanel__DtehD"}},2:function(e,t,a){e.exports={breakLine:"SettingsModal_breakLine__3H9tB",header:"SettingsModal_header__n9kzT",close:"SettingsModal_close__29gOg",heading:"SettingsModal_heading__w4mSa",subHeading:"SettingsModal_subHeading__2AAJ8",form:"SettingsModal_form__1EOFt",settingsItem:"SettingsModal_settingsItem__1ghdv",time:"SettingsModal_time__19GqO",buttonsWrapper:"SettingsModal_buttonsWrapper__3ZvrO",button:"SettingsModal_button__2ZeM3",colors:"SettingsModal_colors__2dlnP",colorsInputs:"SettingsModal_colorsInputs__2CcZx",radio:"SettingsModal_radio__1SVIV",radioInput:"SettingsModal_radioInput__1PFsk",radioControl:"SettingsModal_radioControl__3S7_6",soundItem:"SettingsModal_soundItem__1jFn5",soundSubheading:"SettingsModal_soundSubheading__11oK0",soundSelect:"SettingsModal_soundSelect__2EksQ",autoStartWrapper:"SettingsModal_autoStartWrapper__C1RP7"}},21:function(e,t,a){e.exports={container:"Timer_container__3Iyff",wrapper:"Timer_wrapper__3nqQO",timer:"Timer_timer__1-RMC",status:"Timer_status__aX9J8",reset:"Timer_reset__1WPsG"}},28:function(e,t,a){e.exports={container:"NumberInput_container__X_BBb",label:"NumberInput_label__1UD3R",input:"NumberInput_input__31-0C"}},31:function(e,t,a){e.exports={clock:"Clock_clock__33oSO",semicolon:"Clock_semicolon__3GSmn"}},38:function(e,t,a){e.exports={progressRing:"ProgressRing_progressRing__2nNiF"}},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(19),s=a.n(o),r=a(4),i=(a(47),a(5));function l(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function u(e){var t=Math.floor(e/60),a=e%60;return{minutes:t<10?"0".concat(t):t.toString(),seconds:a<10?"0".concat(a):a.toString()}}var d=a(1),b=document.documentElement,j={timers:[{label:"pomodoro",time:1500},{label:"short break",time:300},{label:"long break",time:600}],selectedColor:"#f67174",sound:{name:"Analog Alarm",volume:50},autostart:!0,notification:!0};function m(){return function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):null}("settings")||j}function O(e,t){var a=null;switch(t.type){case"updateTimers":var n=t.payload;return l("settings",a=Object(i.a)(Object(i.a)({},e),{},{timers:n})),a;case"updateColor":var c=t.payload;return l("settings",a=Object(i.a)(Object(i.a)({},e),{},{selectedColor:c})),a;case"updateSound":var o=t.payload,s=o.name,r=o.volume;return l("settings",a=Object(i.a)(Object(i.a)({},e),{},{sound:{name:s,volume:r}})),a;case"updateAutostart":var u=t.payload;return l("settings",a=Object(i.a)(Object(i.a)({},e),{},{autostart:u})),a;case"updateNotification":var d=t.payload;return l("settings",a=Object(i.a)(Object(i.a)({},e),{},{notification:d})),a;default:throw new Error}}var h=Object(n.createContext)(null);function f(e){var t=e.children,a=Object(n.useReducer)(O,m()),c=Object(r.a)(a,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){Notification.requestPermission().then((function(e){"denied"===e&&s({type:"updateNotification",payload:!1})}))}),[]),Object(n.useEffect)((function(){b.style.setProperty("--color-main",o.selectedColor)}),[o.selectedColor]),Object(d.jsx)(h.Provider,{value:[o,s],children:t})}function p(){var e=Object(n.useContext)(h);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e}var v=a(27),g=a(32),x=a(39),_=a(37),S=a(29),k=(a(49),a(28)),N=a.n(k);function w(e){var t=e.min,a=e.max,n=e.label,c=e.value,o=e.onChange;return Object(d.jsxs)("div",{className:N.a.container,children:[Object(d.jsx)("label",{className:N.a.label,htmlFor:n,children:n}),Object(d.jsx)("input",{className:N.a.input,id:n,name:n,min:t,max:a,type:"number",value:c,onChange:function(e){var t=e.target,a=t.name,n=t.value;o(a,n)}})]})}var y=a(22),C=(a(50),a(36)),M=a.n(C);function P(e){var t=e.volume,a=e.onChange;function c(e){a(e)}var o=Object(n.useMemo)((function(){return M()(c,200)}),[]);return Object(d.jsx)(y.b,{onChange:function(e){return o(e)},min:0,max:100,step:5,value:t,children:Object(d.jsxs)(y.e,{children:[Object(d.jsx)(y.d,{}),[25,50,75].map((function(e){return Object(d.jsx)(y.c,{value:e},"marker".concat(e))})),Object(d.jsx)(y.a,{})]})})}function I(e,t){var a=t.volume,c=t.duration,o=void 0===c?500:c,s=Object(n.useState)(!1),i=Object(r.a)(s,2),l=i[0],u=i[1],d=Object(n.useState)((function(){var t=new Audio(e);return t.volume=a/100,t})),b=Object(r.a)(d,1)[0],j=Object(n.useCallback)((function(){u(!0)}),[]);return Object(n.useEffect)((function(){b.src=e}),[e,b]),Object(n.useEffect)((function(){b.volume=a/100}),[a,b]),Object(n.useEffect)((function(){var e;return l?(b.play(),e=window.setTimeout((function(){u(!1)}),o)):(b.pause(),b.currentTime=0),function(){return window.clearTimeout(e)}}),[l,b,o]),{play:j}}var T,E={"Analog Alarm":"/Pomodoro/audio/Analog Alarm.mp3",Ding:"/Pomodoro/audio/Ding.mp3","Digital Alarm":"/Pomodoro/audio/Digital Alarm.mp3"},A=[{name:"red",value:"#f67174"},{name:"blue",value:"#75f3f7"},{name:"purple",value:"#d880f5"}],D=a(2),L=a.n(D);function R(e){var t=e.isOpen,a=e.close,c=p(),o=Object(r.a)(c,2),s=o[0],l=o[1],u=Object(n.useState)(s.timers.reduce((function(e,t){return e[t.label]=(t.time/60).toString(),e}),{})),b=Object(r.a)(u,2),m=b[0],O=b[1],h=Object(n.useState)(Object(g.a)(A).map((function(e){return e.value===s.selectedColor?Object(i.a)(Object(i.a)({},e),{},{checked:!0}):Object(i.a)(Object(i.a)({},e),{},{checked:!1})}))),f=Object(r.a)(h,2),k=f[0],N=f[1],y=Object.keys(E),C=Object(n.useState)(s.sound.name),M=Object(r.a)(C,2),T=M[0],D=M[1],R=Object(n.useState)(s.sound.volume),W=Object(r.a)(R,2),H=W[0],F=W[1],B=I("".concat(E[T]),{volume:H,duration:500}).play,z=Object(n.useState)(s.autostart),J=Object(r.a)(z,2),Z=J[0],q=J[1],G=Object(n.useState)(s.notification),V=Object(r.a)(G,2),Q=V[0],U=V[1];function X(e,t){O(Object(i.a)(Object(i.a)({},m),{},Object(v.a)({},e,t)))}function K(e){var t=e.target.value;N(k.map((function(e){return e.value===t?Object(i.a)(Object(i.a)({},e),{},{checked:!0}):Object(i.a)(Object(i.a)({},e),{},{checked:!1})})))}return Object(d.jsxs)(x.a,{isOpen:t,onDismiss:a,"aria-label":"settings",children:[Object(d.jsxs)("div",{className:L.a.header,children:[Object(d.jsx)("h2",{className:L.a.heading,children:"Settings"}),Object(d.jsxs)("button",{className:L.a.close,onClick:a,children:[Object(d.jsx)(_.a,{children:"Close"}),Object(d.jsx)("span",{"aria-hidden":!0,children:"\xd7"})]})]}),Object(d.jsx)("hr",{className:L.a.breakLine}),Object(d.jsxs)("form",{className:L.a.form,onSubmit:function(e){var t;e.preventDefault(),l({type:"updateTimers",payload:Object.entries(m).map((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return{label:a,time:60*Number(n)}}))});var n=null===(t=k.find((function(e){return e.checked})))||void 0===t?void 0:t.value;n!==s.selectedColor&&l({type:"updateColor",payload:n}),T===s.sound.name&&H===s.sound.volume||l({type:"updateSound",payload:{name:T,volume:H}}),Z!==s.autostart&&l({type:"updateAutostart",payload:Z}),Q!==s.notification&&l({type:"updateNotification",payload:Q}),a()},children:[Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{className:L.a.settingsItem,children:[Object(d.jsx)("span",{className:L.a.subHeading,children:"Time (minutes)"}),Object(d.jsx)("div",{className:L.a.time,children:Object.entries(m).map((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];return Object(d.jsx)(w,{label:a,max:90,min:1,value:n,onChange:X},a)}))})]}),Object(d.jsx)("li",{className:L.a.settingsItem,children:Object(d.jsxs)("div",{className:L.a.colors,children:[Object(d.jsx)("span",{className:L.a.subHeading,children:"Color"}),Object(d.jsx)("div",{className:L.a.colorsInputs,role:"radiogroup",children:k.map((function(e){var t=e.name,a=e.value,n=e.checked;return Object(d.jsx)("label",{className:L.a.radio,"data-testid":a,children:Object(d.jsxs)("span",{className:L.a.radioInput,children:[Object(d.jsx)("input",{type:"radio",name:"color",value:a,checked:n,onChange:K}),Object(d.jsx)("span",{className:L.a.radioControl,style:{backgroundColor:a},children:Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-check",width:"18",height:"16",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"#171931",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(d.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(d.jsx)("path",{d:"M5 12l5 5l10 -10"})]})})]})},t)}))})]})}),Object(d.jsx)("li",{className:L.a.settingsItem,children:Object(d.jsxs)("div",{className:L.a.sound,children:[Object(d.jsx)("span",{className:L.a.subHeading,children:"Alarm Sound"}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:L.a.soundItem,children:[Object(d.jsx)("span",{className:L.a.soundSubheading,children:"Sound"}),Object(d.jsx)(S.a,{"aria-labelledby":"select sound",value:T,onChange:function(e){return function(e){D(e),B()}(e)},portal:!1,as:"span",children:Object(d.jsx)(S.b,{style:{zIndex:100},children:y.map((function(e){return Object(d.jsx)(S.c,{value:e,children:e},e)}))})})]}),Object(d.jsxs)("div",{className:L.a.soundItem,children:[Object(d.jsx)("span",{className:L.a.soundSubheading,children:"Volume"}),Object(d.jsx)(P,{onChange:function(e){F(e),B()},volume:H})]})]})]})}),Object(d.jsx)("li",{className:L.a.settingsItem,children:Object(d.jsxs)("div",{className:L.a.autoStartWrapper,children:[Object(d.jsx)("label",{htmlFor:"autoStart",className:L.a.subHeading,children:"Auto start ?"}),Object(d.jsx)("input",{id:"autoStart",type:"checkbox",checked:Z,onChange:function(e){q(!Z)}})]})}),Object(d.jsx)("li",{className:L.a.settingsItem,children:Object(d.jsxs)("div",{className:L.a.autoStartWrapper,children:[Object(d.jsx)("label",{htmlFor:"notification",className:L.a.subHeading,children:"Notification"}),Object(d.jsx)("input",{id:"notification",type:"checkbox",checked:Q,onChange:function(e){U(!Q)}})]})})]}),Object(d.jsxs)("div",{className:L.a.buttonsWrapper,children:[Object(d.jsx)("button",{className:"".concat(L.a.button," ").concat(L.a.submit),type:"submit",children:"Apply"}),Object(d.jsx)("button",{className:"".concat(L.a.button," ").concat(L.a.reset),type:"button",onClick:function(){var e=j.selectedColor,t=j.sound,a=j.autostart,n=j.notification;O(j.timers.reduce((function(e,t){return e[t.label]=(t.time/60).toString(),e}),{})),N(Object(g.a)(A).map((function(t){return t.value===e?Object(i.a)(Object(i.a)({},t),{},{checked:!0}):Object(i.a)(Object(i.a)({},t),{},{checked:!1})}))),D(t.name),F(t.volume),q(a),U(n)},children:"Reset"})]})]})]})}!function(e){e.Started="STARTED",e.Paused="PAUSED"}(T||(T={}));var W=a(31),H=a.n(W);function F(e){var t=u(e.time),a=t.minutes,n=t.seconds;return Object(d.jsx)("div",{className:H.a.clock,"data-testid":"clock",children:Object(d.jsxs)(d.Fragment,{children:[a,Object(d.jsx)("span",{className:H.a.semicolon,children:":"}),n]})})}var B=a(38),z=a.n(B);function J(e){var t=e.radius,a=e.stroke,n=e.progress,c=e.color,o=t-2*a,s=2*o*Math.PI,r=s-n/100*s;return Object(d.jsx)("svg",{height:2*t,width:2*t,className:z.a.progressRing,children:Object(d.jsx)("circle",{stroke:c,fill:"transparent",strokeWidth:a,strokeDasharray:s+" "+s,style:{strokeDashoffset:r},r:o,cx:t,cy:t})})}var Z=a(21),q=a.n(Z);function G(e){var t=e.statusText,a=e.currentTime,c=e.initialTime,o=e.toggle,s=e.reset,i=Object(n.useState)(100),l=Object(r.a)(i,2),u=l[0],b=l[1],j=p(),m=Object(r.a)(j,1)[0].selectedColor;return Object(n.useEffect)((function(){b(Math.floor(a/c*100))}),[a,c]),Object(d.jsx)("div",{className:q.a.container,children:Object(d.jsxs)("div",{className:q.a.wrapper,children:[Object(d.jsxs)("button",{onClick:o,"data-testid":"toggle",disabled:0===a,className:q.a.timer,children:[Object(d.jsx)(J,{progress:u,radius:140,stroke:8,color:m}),Object(d.jsx)(F,{time:a}),Object(d.jsx)("p",{className:q.a.status,children:t})]}),Object(d.jsx)("button",{className:q.a.reset,onClick:s,"data-testid":"reset",children:Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-refresh",width:"28",height:"28",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#75f3f7",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(d.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(d.jsx)("path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4"}),Object(d.jsx)("path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"})]})})]})})}var V=a(17),Q=a.n(V);function U(){var e=p(),t=Object(r.a)(e,1)[0],a=t.timers,c=t.sound,o=t.autostart,s=Object(n.useState)(0),i=Object(r.a)(s,2),l=i[0],b=i[1],j=a[l],m=Object(n.useRef)(0),O=Object(n.useState)(!1),h=Object(r.a)(O,2),f=h[0],v=h[1],g=I("".concat(E[c.name]),{volume:c.volume,duration:2e3}).play,x=Object(n.useCallback)((function(){m.current++,1!==l?0!==l||1!==m.current?0!==l||3!==m.current?2===l&&(v(!1),m.current=0):b(2):b(1):b(0)}),[l]),_=Object(n.useCallback)((function(){g(),window.Notification&&"denied"!==Notification.permission&&new Notification("Pomodoro",{body:"Your time is up!",silent:!0}),o&&setTimeout((function(){x()}),1e3)}),[g,o,x]),S=function(e,t,a,c){var o=Object(n.useState)(T.Paused),s=Object(r.a)(o,2),i=s[0],l=s[1],u=Object(n.useState)(e),d=Object(r.a)(u,2),b=d[0],j=d[1],m=Object(n.useRef)(0),O=Object(n.useRef)(0),h=Object(n.useRef)(0);Object(n.useEffect)((function(){j(e),l(t&&a?T.Started:T.Paused)}),[e,t,a]),Object(n.useEffect)((function(){return i===T.Started&&(h.current=window.setInterval((function(){var e=Date.now()-m.current,t=Math.round(e/1e3);t!==O.current&&(O.current=t,j((function(e){return e-1})))}),100)),i===T.Paused&&window.clearInterval(h.current),i===T.Started&&0===b&&(l(T.Paused),c()),function(){window.clearInterval(h.current)}}),[i,b,c]);var f=Object(n.useCallback)((function(){b<1||(i===T.Paused?(l(T.Started),m.current=Date.now()):l(T.Paused))}),[i,b]),p=Object(n.useCallback)((function(){window.clearInterval(h.current),l(T.Paused),j(e)}),[e]);return{statusText:i===T.Started?"pause":"start",currentTime:b,toggle:f,reset:p}}(j.time,o,f,_),k=S.statusText,N=S.currentTime,w=S.toggle,y=S.reset,C=Object(n.useState)(!1),M=Object(r.a)(C,2),P=M[0],A=M[1];return Object(n.useEffect)((function(){var e=u(N),t=e.minutes,a=e.seconds;document.title="".concat(t,":").concat(a)}),[N]),Object(n.useEffect)((function(){function e(e){"Space"===e.code&&e.target===document.body&&(w(),0===l&&v(!0))}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[w,l]),Object(d.jsxs)("div",{className:Q.a.container,children:[Object(d.jsx)("h1",{className:Q.a.heading,children:"Pomodoro"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:Q.a.tabList,children:a.map((function(e,t){var a=e.label;return Object(d.jsx)("button",{className:"".concat(Q.a.tab," ").concat(t===l?Q.a.selectedTab:""),onClick:function(){b(t)},children:a},a)}))}),Object(d.jsx)("div",{className:Q.a.tabPanel,children:Object(d.jsx)(G,{statusText:k,initialTime:j.time,currentTime:N,toggle:function(){w(),0===l&&v(!0)},reset:y})})]}),Object(d.jsx)("div",{className:Q.a.footer,children:Object(d.jsx)("button",{onClick:function(){return A(!0)},"data-testid":"settings",children:Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-settings",width:"28",height:"28",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#75f3f7",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[Object(d.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Object(d.jsx)("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),Object(d.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})}),Object(d.jsx)(R,{isOpen:P,close:function(){return A(!1)}})]})}function X(){return Object(d.jsx)(f,{children:Object(d.jsx)(U,{})})}a(54);s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(X,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.f85a37a1.chunk.js.map